import classNames from "classnames";
import { FC, useEffect, useState } from "react";
import MainLayout from "../layout/MainLayout";
import Navbar from "../Buyer/Navbar/Navbar";
import CartItem from "./CartItem";
import Step1 from "./Step1";
import Step2 from "./Step2/Step2";
import { Router, useRouter } from "next/router";
import AddAddress from "./Step2/AddAddress/AddAddress";
import { AnimatePresence, motion } from "framer-motion";
import Link from "next/link";

type props = {
  cartData: cartDataType[];
};

const Cart: FC<props> = ({ cartData }) => {
  const { query } = useRouter();

  const [payStep, setpayStep] = useState(
    query.paystep ? Number(query.paystep) : 1
  );

  // Should get access step from backend (useState is not solution)
  const [accessStep, setAccessStep] = useState(1);
  const [addAddressState, setaddAddressState] = useState(false);

  useEffect(() => {
    if (payStep > accessStep) {
      setAccessStep(payStep);
    }
  }, [payStep]);

  return (
    <MainLayout showNavbar={payStep === 1}>
      <section className="flex flex-col w-full  justify-center items-center p-6 gap-2 mb-20">
        <h2 className="text-xl font-[500] text-gray-700 p-3">سبد خرید</h2>
        <div className="h-full w-full mt-2">
          <div className="flex flex-row justify-between w-full relative">
            <div className="flex flex-row  justify-between w-full z-10">
              <Link href="/cart">
                <div
                  onClick={() => {
                    setpayStep(1);
                  }}
                  className="flex items-center justify-center bg-gray-100 h-20 w-20 relative rounded-3xl"
                >
                  <svg
                    width="36"
                    height="39"
                    viewBox="0 0 36 39"
                    className={classNames(
                      payStep === 1 ? "fill-[#777777]" : "fill-[#1489FF]"
                    )}
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M32.5685 38.7742H3.43179C2.4861 38.7742 1.573 38.3786 0.926869 37.6882C0.280393 36.9978 -0.0545115 36.061 0.00725373 35.1177L1.36163 14.5293C1.48035 12.7312 2.98468 11.323 4.78616 11.323H31.2141C33.0156 11.323 34.5199 12.7312 34.6383 14.529L35.9927 35.1177C36.0548 36.061 35.7195 36.9978 35.0731 37.6882C34.4273 38.3786 33.5142 38.7742 32.5685 38.7742ZM4.78616 12.6956C3.70527 12.6956 2.80281 13.5407 2.73178 14.6192L1.37741 35.2073C1.33967 35.782 1.53526 36.3297 1.92849 36.7497C2.32208 37.17 2.856 37.4013 3.43179 37.4013H32.5685C33.1443 37.4013 33.6779 37.1697 34.0718 36.7497C34.465 36.3293 34.661 35.782 34.6229 35.2073L33.2685 14.6189C33.1975 13.5404 32.295 12.6956 31.2141 12.6956H4.78616Z" />
                    <path d="M29.3225 16.8139C28.9437 16.8139 28.6363 16.5064 28.6363 16.1276V14.5834C28.6363 7.29893 23.8645 1.37256 17.9989 1.37256C12.1333 1.37256 7.36157 7.29893 7.36157 14.5834V16.1276C7.36157 16.5064 7.05412 16.8139 6.67529 16.8139C6.29647 16.8139 5.98901 16.5064 5.98901 16.1276V14.5834C5.98901 6.54196 11.3767 0 17.9989 0C24.6212 0 30.0088 6.54196 30.0088 14.5834V16.1276C30.0088 16.5064 29.7014 16.8139 29.3225 16.8139Z" />
                    <circle cx="6.69639" cy="15.9064" r="1.17442" />
                    <circle cx="29.3011" cy="15.9064" r="1.17442" />
                  </svg>
                </div>
              </Link>
              <Link href={accessStep >= 2 ?"/cart/order?paystep=2" : ''}>
                <div
                  onClick={() => {
                    if(accessStep >= 2) setpayStep(2);
                    console.log(accessStep);
                    
                  }}
                  className="flex items-center justify-center bg-gray-100 h-20 w-20 relative rounded-3xl"
                >
                  <svg
                    width="43"
                    height="41"
                    viewBox="0 0 43 41"
                    className={classNames(
                      payStep === 2
                        ? "fill-[#777777]"
                        : payStep < 2
                        ? "fill-[#c3c3c3]"
                        : "fill-[#1489FF]"
                    )}
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M42.6641 9.7501C42.4625 9.61572 42.1937 9.54853 41.9922 9.68291L28.2859 14.5876L18.6781 11.0938C19.2156 9.7501 19.4844 8.54072 19.4844 7.53291C19.4844 5.71885 18.8125 4.10635 17.5359 2.82979C16.2594 1.55322 14.5797 0.881348 12.8328 0.881348C9.1375 0.881348 6.18125 3.8376 6.18125 7.53291C6.18125 8.80947 6.65156 10.3548 7.45781 12.236L0.470312 14.5876C0.201562 14.722 0 14.9907 0 15.2595V39.447C0 39.7157 0.134375 39.9173 0.335937 40.0517C0.470312 40.1188 0.604687 40.186 0.739062 40.186C0.80625 40.186 0.940625 40.186 1.00781 40.1188L14.7141 35.2813L28.0172 40.186C28.1516 40.2532 28.3531 40.2532 28.4875 40.186L42.4625 35.2142C42.7312 35.0798 42.9328 34.811 42.9328 34.5423V10.3548C43 10.086 42.8656 9.88447 42.6641 9.7501ZM12.8328 2.2251C14.2437 2.2251 15.5203 2.7626 16.4609 3.77041C17.4687 4.71104 18.0062 6.05479 18.0062 7.39854C18.0062 8.33916 17.6703 9.61572 16.9984 11.0938C15.7891 13.7813 13.7734 16.6032 12.8328 17.8798C12.6984 17.7454 12.6312 17.611 12.4969 17.4095C11.6234 16.2001 10.2125 14.1845 9.20469 12.1017C8.19687 10.1532 7.72656 8.54072 7.72656 7.33135C7.65937 4.57666 10.0109 2.2251 12.8328 2.2251ZM41.5219 34.0048L28.2859 38.7079L14.9828 33.8032C14.9156 33.8032 14.7812 33.736 14.7141 33.736C14.6469 33.736 14.5125 33.736 14.4453 33.8032L1.47812 38.4392V15.797L8.19687 13.4454C8.19687 13.4454 8.19687 13.4454 8.19687 13.5126C8.26406 13.5798 8.26406 13.647 8.33125 13.7142C8.39844 13.8485 8.46562 13.9829 8.53281 14.1173C8.6 14.1845 8.6 14.2517 8.66719 14.3188C8.73437 14.4532 8.80156 14.5876 8.86875 14.722C8.93594 14.7892 8.93594 14.8563 9.00312 14.9235C9.07031 15.0579 9.1375 15.1923 9.20469 15.2595C9.27187 15.3267 9.27187 15.3938 9.33906 15.461C9.40625 15.5954 9.47344 15.6626 9.54062 15.797C9.60781 15.8642 9.60781 15.9313 9.675 15.9985C9.74219 16.1329 9.80937 16.2001 9.87656 16.3345C9.94375 16.4017 9.94375 16.4688 10.0109 16.536C10.0781 16.6704 10.1453 16.7376 10.2125 16.872C10.2797 16.9392 10.2797 17.0063 10.3469 17.0735C10.4141 17.2079 10.4812 17.2751 10.5484 17.4095C10.6156 17.4767 10.6156 17.5438 10.6828 17.5438C10.75 17.6782 10.8172 17.7454 10.8844 17.8126C10.8844 17.8798 10.9516 17.8798 10.9516 17.947C11.0187 18.0813 11.0859 18.1485 11.1531 18.2157L11.2203 18.2829C11.2875 18.3501 11.3547 18.4845 11.4219 18.5517L11.4891 18.6188C11.5562 18.686 11.6234 18.8204 11.6906 18.8876C11.7578 18.9548 11.825 19.022 11.8922 19.0892C12.0266 19.2907 12.1609 19.4251 12.1609 19.4923C12.2953 19.6938 12.4969 19.761 12.7656 19.761C12.9672 19.761 13.1687 19.6267 13.3703 19.4923C13.3703 19.4923 13.4375 19.4251 13.5719 19.2907L13.6391 19.2235C13.7062 19.1563 13.7062 19.1563 13.7734 19.0892L13.8406 19.022C13.9078 18.9548 13.9078 18.8876 13.975 18.8204C13.975 18.7532 14.0422 18.7532 14.0422 18.686C14.1094 18.6188 14.1766 18.5517 14.1766 18.4845C14.2437 18.4173 14.2437 18.3501 14.3109 18.2829C14.3781 18.2157 14.4453 18.1485 14.5125 18.0142C14.5797 17.947 14.5797 17.8798 14.6469 17.8126C14.7141 17.7454 14.7812 17.6782 14.8484 17.5438C14.9156 17.4767 14.9828 17.4095 14.9828 17.3423C15.05 17.2751 15.1172 17.1407 15.1844 17.0735C15.2516 17.0063 15.3187 16.872 15.3859 16.8048C15.4531 16.7376 15.5203 16.6032 15.5875 16.536C15.6547 16.4688 15.7219 16.3345 15.7891 16.2673C15.8562 16.1329 15.9234 16.0657 15.9906 15.9313C16.0578 15.8642 16.125 15.7298 16.1922 15.6626C16.2594 15.5282 16.3266 15.461 16.3937 15.3267C16.4609 15.1923 16.5281 15.1251 16.5953 14.9907C16.6625 14.8563 16.7297 14.7892 16.7969 14.6548C16.8641 14.5204 16.9312 14.4532 16.9984 14.3188C17.0656 14.1845 17.1328 14.1173 17.2 13.9829C17.2672 13.8485 17.3344 13.7813 17.4016 13.647C17.4687 13.5126 17.5359 13.4454 17.6031 13.311C17.6703 13.1767 17.7375 13.1095 17.8047 12.9751C17.8719 12.8407 17.9391 12.7063 18.0062 12.6392C18.0734 12.5048 18.1406 12.4376 18.1406 12.3032C18.1406 12.3032 18.1406 12.3032 18.1406 12.236L28.0844 15.8642C28.2187 15.9313 28.4203 15.9313 28.5547 15.8642L41.5219 11.2282V34.0048V34.0048Z" />
                    <path d="M35.2734 27.4875C35.4078 27.5547 35.6094 27.5547 35.7437 27.5547C36.1469 27.5547 36.55 27.4203 36.8859 27.2188C37.3562 26.8828 37.6922 26.4125 37.8265 25.875C37.9609 25.3375 37.8265 24.7328 37.5578 24.2625C37.2219 23.7922 36.7515 23.4563 36.214 23.3219C35.0719 23.0531 33.8625 23.7922 33.5937 24.9344C33.4594 25.4719 33.5937 26.0766 33.8625 26.5469C34.2656 27.0172 34.7359 27.3531 35.2734 27.4875ZM35.0719 25.2031C35.139 24.8 35.5422 24.5984 35.8781 24.6656C36.0797 24.7328 36.214 24.8 36.2812 25.0016C36.3484 25.1359 36.4156 25.3375 36.3484 25.5391C36.2812 25.7406 36.214 25.875 36.0125 25.9422C35.8781 26.0094 35.6765 26.0766 35.475 26.0094C35.2734 25.9422 35.139 25.875 35.0719 25.6734C35.0719 25.5391 35.0719 25.4047 35.0719 25.2031Z" />
                    <path d="M7.39053 25.2705L6.92021 25.5392L6.65146 25.0689C6.4499 24.733 5.97959 24.5986 5.64365 24.8673C5.30771 25.0689 5.17334 25.5392 5.44209 25.8751L5.71084 26.3455L5.24053 26.6142C4.90459 26.8158 4.77021 27.2861 5.03896 27.622C5.10615 27.8908 5.3749 27.958 5.57646 27.958C5.71084 27.958 5.84521 27.8908 5.97959 27.8236L6.4499 27.5548L6.71865 28.0252C6.85303 28.2267 7.12178 28.3611 7.32334 28.3611C7.45771 28.3611 7.59209 28.2939 7.72646 28.2267C8.0624 28.0252 8.19678 27.5548 7.92803 27.2189L7.65928 26.7486L8.12959 26.4798C8.46553 26.2783 8.5999 25.808 8.33115 25.472C8.19678 25.1361 7.72646 25.0689 7.39053 25.2705Z" />
                    <path d="M14.311 27.2859C13.4376 27.2859 12.2954 27.1515 11.5563 26.95C11.1532 26.8828 10.7501 27.1515 10.6829 27.5547C10.6157 27.9578 10.8845 28.3609 11.2876 28.4281C12.0266 28.5625 13.236 28.764 14.311 28.764C14.7141 28.764 15.0501 28.4281 15.0501 28.025C15.0501 27.6219 14.7141 27.2859 14.311 27.2859Z" />
                    <path d="M19.8203 24.7328C19.35 25.4047 18.8125 25.9422 18.1406 26.3453C17.939 26.4797 17.6703 26.614 17.4015 26.7484C16.9984 26.8828 16.864 27.3531 16.9984 27.7562C17.1328 28.025 17.4015 28.2265 17.6703 28.2265C17.7375 28.2265 17.8718 28.2265 17.939 28.1594C18.275 28.025 18.5437 27.8906 18.8125 27.689C19.6187 27.1515 20.2906 26.5469 20.8953 25.7406C21.164 25.4047 21.0968 24.9344 20.7609 24.7328C20.5593 24.3297 20.089 24.3969 19.8203 24.7328Z" />
                    <path d="M25.1954 19.8955C24.4563 19.8955 24.0532 20.0971 23.65 20.2314C22.7094 20.6346 21.9032 21.508 21.7016 21.7768C21.4329 22.1127 21.5 22.583 21.7688 22.8518C21.9032 22.9861 22.1047 23.0533 22.2391 23.0533C22.4407 23.0533 22.6422 22.9861 22.7766 22.7846C23.1125 22.3814 23.65 21.9111 24.1875 21.6424C24.5907 21.508 24.725 21.4408 25.1954 21.3736C25.5985 21.3736 25.9344 21.0377 25.9344 20.6346C25.9344 20.2314 25.5985 19.8955 25.1954 19.8955Z" />
                    <path d="M27.95 21.0376C27.8157 21.4407 27.9501 21.8438 28.3532 22.0454C29.0922 22.3813 30.1672 22.9188 30.9735 23.5235C31.1079 23.5907 31.2422 23.6579 31.3766 23.6579C31.6454 23.6579 31.8469 23.5235 31.9813 23.3219C32.1829 22.986 32.1157 22.5157 31.7797 22.3141C30.8391 21.7094 29.7641 21.1048 28.8907 20.7688C28.5547 20.5001 28.1516 20.7016 27.95 21.0376Z" />
                    <path d="M12.8327 9.21255C14.1093 9.21255 15.1171 8.20474 15.1171 6.92817C15.1171 5.65161 14.1093 4.6438 12.8327 4.6438C11.5562 4.6438 10.5483 5.65161 10.5483 6.92817C10.5483 8.20474 11.6233 9.21255 12.8327 9.21255ZM12.8327 6.12192C13.2358 6.12192 13.639 6.45786 13.639 6.92817C13.639 7.3313 13.303 7.73442 12.8327 7.73442C12.4296 7.73442 12.0265 7.39849 12.0265 6.92817C12.0937 6.52505 12.4296 6.12192 12.8327 6.12192Z" />
                  </svg>
                </div>
              </Link>
              <Link href={accessStep === 3 ?"/cart/order?paystep=3" : '#'}>
              <div
                onClick={() => {
                  if(accessStep === 3) setpayStep(3);
                }}
                className="flex items-center justify-center bg-gray-100 h-20 w-20 relative rounded-3xl"
              >
                <svg
                  width="82"
                  height="82"
                  viewBox="0 0 82 82"
                  fill="none"
                  strokeWidth="1"
                  stroke={payStep > 2 ? "#777777" : "#c3c3c3"}
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M27.7603 33.5469H23.9166C21.5582 33.5469 19.6458 35.4585 19.6458 37.8177V57.8923C19.6458 60.2515 21.5582 62.1632 23.9166 62.1632H58.0833C60.4425 62.1632 62.3541 60.2515 62.3541 57.8923V37.8177C62.3541 35.4585 60.4425 33.5469 58.0833 33.5469H32.9571"
                    strokeWidth="2"
                    strokeMiterlimit="10"
                    strokeLinecap="round"
                  />
                  <path
                    d="M50.4675 44.5083H19.6458V38.7786H62.3541V44.5083H55.3072"
                    strokeWidth="2"
                    strokeMiterlimit="10"
                    strokeLinecap="round"
                  />
                  <path
                    d="M24.7759 49.9177H38.4349"
                    strokeWidth="2"
                    strokeMiterlimit="10"
                    strokeLinecap="round"
                  />
                  <path
                    d="M24.7759 56.7434H29.8846"
                    strokeWidth="2"
                    strokeMiterlimit="10"
                    strokeLinecap="round"
                  />
                  <path
                    d="M63.5997 56.6251C60.999 57.9654 58.5541 59.6018 56.1438 61.2551C55.3431 61.8044 52.9981 63.1362 53.9676 63.1916C55.576 63.2835 57.4066 62.4265 58.8625 61.8733C59.5973 61.5941 60.1497 61.0609 59.9664 62.0121C59.8276 62.7322 59.6866 63.4783 60.7359 63.1096C61.8288 62.7256 62.6596 61.1172 62.4391 59.9872C62.2294 58.9125 61.2867 59.0804 60.9 59.9242C60.8413 60.052 60.3841 61.3511 60.8621 61.0911C61.9331 60.5087 63.3517 58.9088 63.3726 57.6092C63.3771 57.3355 63.205 57.2793 62.9816 57.4325C62.3621 57.8573 61.9532 58.6952 61.6506 59.3564C61.1036 60.5517 61.9333 59.5395 62.1174 58.9527C62.3675 58.1554 62.5405 57.6492 62.5778 56.827C62.5913 56.5314 63.2939 55.7168 62.7986 55.7168C62.1042 55.7168 61.4551 55.9439 60.7612 55.9439"
                    stroke="#F5F5F5"
                    strokeWidth="2"
                    strokeLinecap="round"
                  />
                  <path
                    d="M54.7436 60.145C54.7436 60.8263 54.7436 61.5075 54.7436 62.1888C54.7436 62.7196 54.1759 63.0027 54.1759 63.4945C54.1759 64.2091 53.8559 62.8637 53.7785 62.6934C53.6028 62.307 53.7217 61.6997 53.7217 61.2804"
                    stroke="#F5F5F5"
                    strokeWidth="3"
                    strokeLinecap="round"
                  />
                  <path
                    d="M64.2811 53.1055C63.4289 52.7808 62.6569 52.8618 61.7832 53.0802C61.4367 53.1669 60.5242 53.1154 60.3071 53.3326"
                    stroke="#F5F5F5"
                    strokeWidth="3"
                    strokeLinecap="round"
                  />
                  <path
                    d="M50.5424 61.5076C50.5424 61.8003 50.4526 62.2671 50.5676 62.5547C50.6648 62.7975 50.883 62.7864 50.883 62.5294"
                    stroke="#F5F5F5"
                    strokeWidth="3"
                    strokeLinecap="round"
                  />
                  <path
                    d="M51.1101 61.8482C51.3374 61.8038 51.5628 61.7673 51.7914 61.7346"
                    stroke="#F5F5F5"
                    strokeWidth="3"
                    strokeLinecap="round"
                  />
                  <path
                    d="M67.9967 57.4C67.967 56.8867 67.3565 56.4856 66.1355 56.1796C66.1766 56.0896 66.1997 55.996 66.2 55.8988V53.8H66.1949C66.0875 52.0516 58.9229 52 58.1 52C57.2771 52 50.1125 52.0516 50.0051 53.8H50V53.839V55.8997C50.0015 56.4697 50.7371 56.9158 51.8315 57.2479C51.8165 57.2977 51.8075 57.3484 51.8045 57.4H51.8V57.439V59.4961C50.621 59.7997 50.0321 60.1951 50.003 60.7H50V60.739V62.7997C50.0009 63.1966 50.3588 63.5332 50.9444 63.8137C50.9222 63.8746 50.9084 63.9367 50.9045 64.0003H50.9V64.0393V66.1C50.9024 67.0978 53.1491 67.7173 55.6454 68.0065C55.6637 68.0101 55.6805 68.0176 55.7 68.0176C55.7057 68.0176 55.7105 68.0146 55.7162 68.0143C56.1974 68.0686 56.6864 68.1109 57.1703 68.1412C57.1805 68.1424 57.1895 68.1472 57.2 68.1472C57.2057 68.1472 57.2102 68.1442 57.2156 68.1439C57.83 68.1811 58.4345 68.2 59 68.2C59.5655 68.2 60.17 68.1811 60.7844 68.1436C60.7898 68.1439 60.7946 68.1469 60.8 68.1469C60.8105 68.1469 60.8195 68.1418 60.8297 68.1409C61.3136 68.1106 61.8026 68.0686 62.2838 68.014C62.2895 68.014 62.2943 68.017 62.3 68.017C62.3195 68.017 62.3363 68.0095 62.3546 68.0059C64.8509 67.7167 67.0973 67.0969 67.1 66.0988V64H67.0952C67.0742 63.6322 66.7607 63.3253 66.1415 63.0688C66.1793 62.9821 66.2 62.8921 66.2 62.7988V60.838C67.277 60.5068 67.9985 60.0637 68 59.4988V57.4H67.9967ZM65.5676 62.8963L65.4653 62.986C65.3078 63.1249 65.0453 63.265 64.7 63.4V61.9696C65.0567 61.8454 65.3603 61.7077 65.6 61.5568V62.7982C65.6 62.8291 65.5886 62.8621 65.5676 62.8963ZM58.8578 64.2904C58.814 64.2916 58.7699 64.2922 58.7258 64.2931C58.6187 64.2952 58.5089 64.2958 58.4003 64.2967V62.7982C58.4828 62.7973 58.5653 62.7961 58.6478 62.7946C58.6637 62.7943 58.6796 62.794 58.6955 62.7937C58.9976 62.788 59.2997 62.7787 59.6003 62.7649V64.2628C59.5361 64.2661 59.4716 64.2691 59.4065 64.2718C59.2259 64.2799 59.0435 64.2859 58.8578 64.2904ZM57.5477 64.2946C57.4103 64.2922 57.2735 64.2889 57.1376 64.2847C57.1208 64.2841 57.104 64.2835 57.0872 64.2829C56.9237 64.2775 56.7614 64.2706 56.6003 64.2628V62.7652C56.9009 62.7793 57.203 62.7886 57.5051 62.794C57.521 62.7943 57.5369 62.7946 57.5525 62.7949C57.635 62.7964 57.7175 62.7976 57.8 62.7985V64.2979C57.7418 64.2973 57.6836 64.2973 57.6257 64.2964C57.5993 64.2958 57.5738 64.2949 57.5477 64.2946ZM52.1291 63.6106C52.1192 63.6076 52.1099 63.6049 52.1 63.6022V62.1529C52.3802 62.2285 52.6814 62.2975 53 62.3602V63.8245C52.7246 63.766 52.4705 63.7045 52.2392 63.6415C52.2026 63.631 52.1648 63.6211 52.1291 63.6106ZM58.4525 66.0949C58.535 66.0964 58.6175 66.0976 58.7 66.0985V67.5982C58.2854 67.5943 57.8852 67.5823 57.5 67.5634V66.0655C57.8006 66.0796 58.1027 66.0889 58.4048 66.0943C58.4207 66.0943 58.4366 66.0946 58.4525 66.0949ZM59.5952 66.094C59.8973 66.0883 60.1994 66.079 60.5 66.0652V67.5631C60.1148 67.582 59.7146 67.594 59.3 67.5979V66.0982C59.3825 66.0973 59.465 66.0961 59.5475 66.0946C59.5634 66.0946 59.5793 66.0943 59.5952 66.094ZM62 65.9584V67.4482C61.7117 67.4785 61.4117 67.5052 61.1 67.5271V66.031C61.4042 66.0112 61.7048 65.9869 62 65.9584ZM62.6 65.8936C62.9093 65.8564 63.2096 65.8141 63.5 65.767V67.24C63.2174 67.2898 62.9171 67.3357 62.6 67.3774V65.8936ZM64.1 65.6599C64.4186 65.5972 64.7198 65.5282 65 65.4526V66.9019C64.7327 66.979 64.4318 67.0537 64.1 67.1242V65.6599ZM53.9 65.6599V67.1242C53.5682 67.0537 53.2673 66.979 53 66.9019V65.4526C53.2802 65.5282 53.5814 65.5975 53.9 65.6599ZM54.5 65.7673C54.7904 65.8144 55.0907 65.8567 55.4 65.8939V67.3777C55.0829 67.336 54.7826 67.2901 54.5 67.2403V65.7673ZM56 65.9584C56.2952 65.9869 56.5958 66.0112 56.9 66.0313V67.5274C56.5883 67.5055 56.2883 67.4788 56 67.4485V65.9584ZM55.2557 64.1644C55.2251 64.1614 55.1948 64.1581 55.1645 64.1551C55.1429 64.153 55.1216 64.1503 55.1 64.1482V62.6587C55.3952 62.6872 55.6958 62.7115 56 62.7316V64.2265C55.748 64.2085 55.499 64.1881 55.2557 64.1644ZM54.5 62.5936V64.0774C54.1829 64.0357 53.8826 63.9898 53.6 63.94V62.467C53.8904 62.5141 54.1907 62.5567 54.5 62.5936ZM60.3998 64.2124C60.3338 64.2175 60.2672 64.2226 60.2 64.2274V62.7313C60.5042 62.7112 60.8048 62.6872 61.1 62.6584V64.1482C60.9146 64.1677 60.725 64.186 60.5303 64.2019C60.4868 64.2058 60.4433 64.2091 60.3998 64.2124ZM61.7 64.0774V62.5936C62.0093 62.5564 62.3096 62.5141 62.6 62.467V63.94C62.3174 63.9898 62.0171 64.036 61.7 64.0774ZM63.2 62.3599C63.5186 62.2972 63.8198 62.2282 64.1 62.1526V63.6019C63.8327 63.679 63.5318 63.7537 63.2 63.8242V62.3599ZM59.0975 60.9895C58.8719 60.9838 58.6514 60.9751 58.4348 60.9646C58.4231 60.964 58.4114 60.9634 58.4 60.9631V59.4652C58.7006 59.4793 59.0027 59.4886 59.3048 59.494C59.3207 59.4943 59.3366 59.4946 59.3522 59.4949C59.4347 59.4964 59.5172 59.4976 59.5997 59.4985V60.9964C59.4536 60.9949 59.3063 60.9943 59.1638 60.991C59.1419 60.9904 59.1194 60.9901 59.0975 60.9895ZM52.1 56.7022V55.2529C52.3802 55.3285 52.6814 55.3975 53 55.4602V56.9245C52.9631 56.9167 52.925 56.9089 52.889 56.9011C52.7294 56.866 52.5737 56.8294 52.4249 56.7907C52.3115 56.7616 52.2038 56.7319 52.1 56.7022ZM57.5525 55.8949C57.635 55.8964 57.7175 55.8976 57.8 55.8985V57.3964C57.3962 57.3925 56.9948 57.382 56.6 57.3622V55.8655C56.9006 55.8796 57.2027 55.8889 57.5048 55.8943C57.5207 55.8943 57.5366 55.8946 57.5525 55.8949ZM58.6952 55.894C58.9973 55.8883 59.2994 55.879 59.6 55.8652V57.3619C59.549 57.3643 59.5001 57.3679 59.4488 57.3703C59.4446 57.3706 59.4404 57.3706 59.4359 57.3709C59.2346 57.3799 59.0294 57.3865 58.8215 57.3913C58.7891 57.3922 58.7567 57.3925 58.7243 57.3934C58.6175 57.3955 58.5083 57.3958 58.4 57.397V55.8985C58.4825 55.8976 58.565 55.8964 58.6475 55.8949C58.6634 55.8946 58.6793 55.8943 58.6952 55.894ZM65.5313 56.0446L65.5229 56.0428L65.4137 56.1277C65.2553 56.251 65.012 56.3758 64.7 56.4964V55.0693C65.0567 54.9451 65.3603 54.8074 65.6 54.6565V55.8979C65.6 55.9435 65.576 55.9927 65.5313 56.0446ZM61.7 57.1756V55.6936C62.0093 55.6564 62.3096 55.6141 62.6 55.567V57.0376C62.3156 57.088 62.0162 57.1342 61.7 57.1756ZM63.2 56.9221V55.4602C63.5186 55.3975 63.8198 55.3285 64.1 55.2529V56.6989C63.8312 56.7772 63.5285 56.8519 63.2 56.9221ZM61.1 55.7584V57.2464C60.8102 57.277 60.5102 57.3037 60.2 57.3259V55.8313C60.5042 55.8112 60.8048 55.7869 61.1 55.7584ZM55.1 57.247V55.7584C55.3952 55.7869 55.6958 55.8112 56 55.8313V57.3247C55.6946 57.3028 55.3934 57.2779 55.1 57.247ZM54.5 55.6936V57.1759C54.4406 57.1681 54.3788 57.1618 54.32 57.1537C54.2816 57.1483 54.245 57.1426 54.2072 57.1372C54.0338 57.1123 53.8643 57.0856 53.6981 57.0577C53.6648 57.052 53.6327 57.046 53.6 57.0403V55.5673C53.8904 55.6141 54.1907 55.6567 54.5 55.6936ZM57.7256 60.9217C57.6851 60.9187 57.6443 60.9157 57.6041 60.9127C57.4121 60.8977 57.2246 60.8812 57.0416 60.8629C57.0023 60.859 56.963 60.8548 56.924 60.8509C56.9159 60.85 56.9081 60.8488 56.9 60.8482V59.3584C57.1952 59.3869 57.4958 59.4112 57.8 59.4313V60.9265C57.7757 60.9247 57.7499 60.9235 57.7256 60.9217ZM55.7435 60.6976C55.6247 60.6787 55.5131 60.6583 55.4 60.6385V59.1673C55.6904 59.2144 55.9907 59.2567 56.3 59.2939V60.7777C56.1164 60.7534 55.9367 60.7282 55.7642 60.7012C55.7573 60.6997 55.7504 60.6985 55.7435 60.6976ZM54.8 59.0599V60.5218C54.4685 60.4507 54.1679 60.3751 53.9 60.2965V58.8526C54.1802 58.9282 54.4814 58.9975 54.8 59.0599ZM53.3 58.6693V60.0946C52.8284 59.9125 52.5242 59.7265 52.4252 59.5609L52.4051 59.5273C52.4033 59.518 52.4003 59.5081 52.4 59.4988V58.2565C52.6397 58.4074 52.9433 58.5451 53.3 58.6693ZM60.4952 59.494C60.7973 59.4883 61.0994 59.479 61.4 59.4652V60.9616C61.0058 60.9811 60.605 60.9919 60.2 60.9961V59.4985C60.2825 59.4976 60.365 59.4964 60.4475 59.4949C60.4634 59.4946 60.4793 59.4943 60.4952 59.494ZM64.3721 60.6451C64.2404 60.6679 64.1075 60.6904 63.971 60.7111C63.8927 60.7231 63.8126 60.7345 63.7322 60.7459C63.6563 60.7567 63.5774 60.766 63.5003 60.7759V59.2936C63.8096 59.2564 64.1099 59.2141 64.4003 59.167V60.64C64.3907 60.6418 64.3814 60.6436 64.3721 60.6451ZM62.3408 60.9013C62.2289 60.9106 62.1134 60.9166 62 60.9247V59.4313C62.3042 59.4112 62.6048 59.3872 62.9 59.3584V60.8467C62.7257 60.865 62.5517 60.8833 62.3726 60.8983C62.3618 60.8992 62.3516 60.9004 62.3408 60.9013ZM65.7692 60.3388C65.6198 60.3805 65.4617 60.4195 65.3003 60.4576C65.2256 60.475 65.1494 60.4924 65.0714 60.5092C65.0483 60.5143 65.0237 60.5188 65.0003 60.5239V59.0602C65.3189 58.9975 65.6201 58.9285 65.9003 58.8529V60.3022C65.8571 60.3142 65.8136 60.3265 65.7692 60.3388ZM67.3967 57.4195C67.3691 57.6232 66.9074 57.8941 66.0833 58.1488C65.0219 58.4767 63.3611 58.777 61.2563 58.87C61.1486 58.8745 61.0412 58.879 60.9314 58.8826C60.8417 58.8856 60.7517 58.8883 60.6602 58.8907C60.4118 58.8961 60.1598 58.9 59.9 58.9C59.6402 58.9 59.3882 58.8961 59.1398 58.8904C59.0486 58.8883 58.9586 58.8853 58.8686 58.8823C58.7585 58.879 58.6511 58.8742 58.5437 58.8697C56.4389 58.7767 54.7778 58.4764 53.7167 58.1485C52.8992 57.8959 52.4384 57.6271 52.4042 57.4243C52.4057 57.4186 52.4057 57.4138 52.4093 57.4066C52.4297 57.4117 52.4525 57.4159 52.4732 57.421C52.5905 57.4489 52.7108 57.4759 52.8332 57.5017C53.4293 57.6301 54.0899 57.7354 54.7937 57.8158C54.7961 57.8158 54.7979 57.817 54.8 57.817C54.8006 57.817 54.8012 57.8167 54.8015 57.8167C55.2809 57.8713 55.7783 57.9142 56.2889 57.9445C56.2928 57.9445 56.2961 57.9466 56.3 57.9466C56.3021 57.9466 56.3036 57.9454 56.3057 57.9454C56.6732 57.967 57.0455 57.9829 57.4223 57.9913C57.653 57.997 57.8795 58 58.1 58C58.2575 58 58.4189 57.9982 58.5818 57.9952C60.7616 57.9616 62.7818 57.7024 64.1876 57.3007C64.2524 57.2824 64.3157 57.2635 64.3781 57.2446C64.4162 57.2329 64.4552 57.2215 64.4921 57.2098C64.6007 57.175 64.7048 57.1393 64.8053 57.1021C64.8227 57.0955 64.8392 57.0889 64.8566 57.0823C64.9415 57.0502 65.0231 57.0169 65.1011 56.983C65.1236 56.9731 65.1467 56.9635 65.1686 56.9536C65.2517 56.9161 65.3321 56.8777 65.4065 56.8378C65.4401 56.8201 65.4692 56.8018 65.5007 56.7838C65.5367 56.7631 65.5727 56.7421 65.606 56.7208C65.6249 56.7088 65.6474 56.6974 65.6654 56.6854C67.0085 56.9767 67.3625 57.2953 67.3967 57.4195ZM58.1 52.6C63.0467 52.6 65.5487 53.3788 65.5955 53.8258C65.5592 54.0286 65.0987 54.2965 64.2833 54.5485C63.2219 54.8764 61.5611 55.1767 59.4563 55.2697C59.3486 55.2742 59.2412 55.2787 59.1314 55.2823C59.0417 55.2853 58.9517 55.288 58.8602 55.2904C58.6118 55.2961 58.3598 55.3 58.1 55.3C57.8402 55.3 57.5882 55.2961 57.3398 55.2904C57.2486 55.2883 57.1586 55.2853 57.0686 55.2823C56.9585 55.279 56.8511 55.2742 56.7437 55.2697C54.6389 55.1767 52.9778 54.8764 51.9167 54.5485C51.101 54.2965 50.6408 54.0286 50.6045 53.8258C50.6513 53.3788 53.1533 52.6 58.1 52.6ZM50.6 55.8988V54.6565C50.8397 54.8074 51.1433 54.9451 51.5 55.0693V56.5057C50.9165 56.287 50.6006 56.0677 50.6 55.8988ZM52.0532 60.0505C52.0577 60.0553 52.0646 60.0595 52.0691 60.0643C52.4798 60.4789 53.3303 60.8047 54.389 61.0477C54.4133 61.0534 54.4391 61.0588 54.4637 61.0645C54.5414 61.0819 54.6203 61.099 54.7001 61.1155C55.6724 61.3225 56.8331 61.4722 58.0976 61.5463C58.0985 61.5463 58.0991 61.5466 58.0997 61.5466C58.1003 61.5466 58.1006 61.5463 58.1009 61.5463C58.5071 61.57 58.9226 61.5865 59.3468 61.5937C59.5346 61.5976 59.7194 61.6 59.9 61.6C60.107 61.6 60.3194 61.5976 60.5354 61.5925C60.9278 61.5844 61.3145 61.5682 61.6958 61.546C61.6973 61.546 61.6985 61.5469 61.7 61.5469C61.7027 61.5469 61.7048 61.5454 61.7075 61.5454C62.9753 61.4707 64.1648 61.3195 65.1707 61.102C64.9529 61.216 64.6547 61.3339 64.2833 61.4488C63.1628 61.795 61.3733 62.1103 59.099 62.1835C59.0315 62.1856 58.9649 62.188 58.8965 62.1898C58.823 62.1916 58.7483 62.1928 58.6736 62.1943C58.4849 62.1973 58.295 62.2 58.1 62.2C57.8402 62.2 57.5882 62.1961 57.3398 62.1904C57.2486 62.1883 57.1586 62.1853 57.0686 62.1823C56.9585 62.179 56.8511 62.1742 56.7437 62.1697C54.6389 62.0767 52.9778 61.7764 51.9167 61.4485C51.0917 61.1935 50.63 60.9223 50.6033 60.7186C50.6366 60.6058 50.9399 60.3235 52.0532 60.0505ZM50.6 62.7988V61.5565C50.8397 61.7074 51.1433 61.8451 51.5 61.9693V63.4L51.3287 63.3334L51.3251 63.337C50.8541 63.1417 50.6006 62.95 50.6 62.7988ZM51.5 66.0988V64.8565C51.7397 65.0074 52.0433 65.1451 52.4 65.2693V66.7057C51.8165 66.487 51.5006 66.2677 51.5 66.0988ZM65.6 66.7057V65.2696C65.9567 65.1454 66.2603 65.0077 66.5 64.8568V66.0982C66.4997 66.2671 66.1835 66.4867 65.6 66.7057ZM66.4961 64.0231C66.4634 64.2262 66.0026 64.4956 65.1833 64.7488C64.1219 65.0767 62.4611 65.377 60.3563 65.47C60.2486 65.4745 60.1412 65.479 60.0314 65.4826C59.9417 65.4856 59.8517 65.4883 59.7602 65.4907C59.5118 65.4961 59.2598 65.5 59 65.5C58.7402 65.5 58.4879 65.4961 58.2392 65.4904C58.1489 65.4883 58.0598 65.4853 57.9707 65.4823C57.86 65.4787 57.752 65.4742 57.6437 65.4697C55.5389 65.3767 53.8781 65.0764 52.8167 64.7485C52.0232 64.5034 51.5648 64.243 51.5072 64.042C51.5966 64.0732 51.6893 64.1035 51.7844 64.1332C51.794 64.1362 51.8036 64.1392 51.8132 64.1419C51.8942 64.1668 51.977 64.1908 52.0619 64.2142C52.094 64.2232 52.1264 64.2322 52.1591 64.2409C52.2071 64.2538 52.2563 64.2661 52.3055 64.2787C53.3981 64.5586 54.7928 64.7569 56.2985 64.846C56.2991 64.846 56.2994 64.8463 56.3 64.8463C56.3003 64.8463 56.3006 64.846 56.3009 64.846C56.7659 64.8736 57.2408 64.8907 57.7208 64.8964C57.8486 64.8988 57.9755 64.9 58.1 64.9C58.2653 64.9 58.4345 64.8979 58.6058 64.8949C59.0435 64.8877 59.4755 64.8715 59.8979 64.8463C59.8988 64.8463 59.8994 64.8469 59.9003 64.8469C59.9018 64.8469 59.9027 64.846 59.9042 64.846C60.4187 64.8151 60.9167 64.771 61.3952 64.7161C61.397 64.7161 61.3985 64.717 61.4003 64.717C61.4069 64.717 61.4123 64.7137 61.4189 64.7131C61.9517 64.6516 62.4569 64.576 62.9258 64.4881C63.0224 64.4704 63.1175 64.4521 63.2117 64.4332C63.2327 64.429 63.2537 64.4248 63.2747 64.4203C64.1606 64.2385 64.9274 64.003 65.4536 63.7111C65.4824 63.6955 65.5094 63.6793 65.5367 63.6634C65.57 63.6436 65.6018 63.6235 65.6327 63.6031C65.6615 63.5845 65.6948 63.5665 65.7212 63.5476C66.3134 63.7588 66.4766 63.9478 66.4961 64.0231ZM66.5 60.1057V58.6696C66.8567 58.5454 67.1603 58.4077 67.4 58.2568V59.4982C67.3997 59.6671 67.0835 59.8867 66.5 60.1057Z"
                    fill="#777777"
                  />
                  <rect x="61" y="51" width="3" height="1" fill="#F5F5F5" />
                  <rect x="49" y="62" width="1" height="2" fill="#F5F5F5" />
                </svg>
              </div>
              </Link>
            </div>
            <div className="absolute top-10 w-full flex flex-row">
              <div
                className={classNames(
                  "border-dashed border-t-2  w-1/2",
                  payStep > 1 ? "border-[#1489FF]" : "border-gray-200"
                )}
              ></div>
              <div
                className={classNames(
                  "border-dashed border-t-2  w-1/2",
                  payStep > 2 ? "border-[#1489FF]" : "border-gray-200"
                )}
              ></div>
            </div>
          </div>

          {payStep === 1 && (
            <Step1
              payStep={payStep}
              setpayStep={setpayStep}
              cartData={cartData}
            />
          )}
          {payStep === 2 && (
            <Step2
              setpayStep={setpayStep}
              setaddAddressState={setaddAddressState}
            />
          )}
        </div>
      </section>
      <AnimatePresence>
        {addAddressState && (
          <AddAddress setaddAddressState={setaddAddressState} />
        )}
      </AnimatePresence>
    </MainLayout>
  );
};

export default Cart;
